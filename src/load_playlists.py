import os, sys
import json


class Saved_Playlists_handler:
    def __init__(self):
        self.playlists_path: str = str(os.path.join(os.getenv("LOCALAPPDATA"),
                                                "Mp3_Player",
                                                "Playlists"
                                                ))

    def load_playlists(self):
        if not os.path.isdir(self.playlists_path):
            return {}

        names: list[str] = os.listdir(self.playlists_path)
        file_paths: list[str] = [os.path.join(self.playlists_path, name) for name in names]
        playlists: dict[str, str] = {}

        for file_path, name in zip(file_paths, names):
            with open(file_path, "r") as file:
                playlists[name.split(".")[0]] = json.load(file)

        return playlists

    def save_playlist(self, playlist_name: str, playlist: list[str]):
        if not os.path.isdir(self.playlists_path):
            os.makedirs(self.playlists_path)

        file_path = os.path.join(self.playlists_path, f"{playlist_name}.json")
        with open(file_path, "w") as file:
            json.dump(playlist, file)  # Save the playlist in JSON format


if __name__ == "__main__":
    loader = Saved_Playlists_handler()
    loader.save_playlist("test", ['C:/Users/maxi2/Music/Stupendium\\A LITTLE HEART  Kingdom Hearts 3 Song  60 DISNEY SONGS IN ONE.mp3', 'C:/Users/maxi2/Music/Stupendium\\A LITTLE THEORIZING  Official Game Theory Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\A MATTER OF FACTORIES  Satisfactory Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\A MATTER OF FACTS   JT Music Fact Rap Challenge.mp3', "C:/Users/maxi2/Music/Stupendium\\A PIZZA THE ACTION  Five Nights at Freddy's Security Breach Song! Prod. by oo oxygen.mp3", 'C:/Users/maxi2/Music/Stupendium\\A PURPOSE FOR NEW LONDON  Faith vs Order - Frostpunk Rap Battle!.mp3', 'C:/Users/maxi2/Music/Stupendium\\A SUMMARY IN SUMERU  Genshin Impact Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\A VERY SCARY CHRISTMAS  Horror Game Xmas Song! FNAF, Bendy, Baldi, DDLC and more!.mp3', 'C:/Users/maxi2/Music/Stupendium\\AD INFINITUM  Deltarune - Spamton G. Spamton Song! Prod. by oo oxygen.mp3', 'C:/Users/maxi2/Music/Stupendium\\ADEQUATE WORDSMITH  Adequate Rapper Raps Adequately  1,000,000 SUBS SPECIAL!.mp3', 'C:/Users/maxi2/Music/Stupendium\\AMATEUR WORDSMITH  2024 REMAKE  1,000,000 SUBS SPECIAL!.mp3', 'C:/Users/maxi2/Music/Stupendium\\AN IMPOSTOR CALLS  Among Us Song feat. Dan Bull!.mp3', 'C:/Users/maxi2/Music/Stupendium\\AND SO WE FALL  Fall Guys Ultimate Knockout Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\AND TO ALL A GOOD FRIGHT  Horror & Villains Xmas Song! FNAF, Poppy Playtime, Bendy and more!.mp3', 'C:/Users/maxi2/Music/Stupendium\\ANOTHER HORROR HOLIDAY  Horror & Villains Xmas Song! FNAF, Bendy, Baldi, Granny and more!.mp3', 'C:/Users/maxi2/Music/Stupendium\\ART OF DARKNESS   Animated Bendy and the Ink Machine Song!.mp3', "C:/Users/maxi2/Music/Stupendium\\BACK TOGETHER  Animated Five Nights At Freddy's Help Wanted Song!.mp3", "C:/Users/maxi2/Music/Stupendium\\CAN'T TEACH THIS  Two Point Campus Song!.mp3", 'C:/Users/maxi2/Music/Stupendium\\CAROL OF THE TAILS  Animated Tattletail Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\CELLS NO MORE  Alice Angel Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\CHAIRMAN OF THE BOARD  Dan Bull Board Game Rap Challenge.mp3', 'C:/Users/maxi2/Music/Stupendium\\CHRISTMAS IN THE BACKROOMS  The Backrooms Christmas song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\DEAD AHEAD  Dredge Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\DOCTOR! DOCTOR!  Two Point Hospital Song feat. Rustage.mp3', "C:/Users/maxi2/Music/Stupendium\\DON'T LET THE BELLHOPS BITE  Dark Deception Song!.mp3", 'C:/Users/maxi2/Music/Stupendium\\FAZBEAR FAMILY  Animated Pizzeria Simulator Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\FIEND LIKE ME  Evil Genius 2 Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\FIND THE KEYS  2022 REMASTER  Bendy and the Ink Machine Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\FIND THE KEYS  Animated Bendy and the Ink Machine Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\FRAGMENTS  Ratchet & Clank Rift Apart Song feat. Freeced & oo oxygen!.mp3', 'C:/Users/maxi2/Music/Stupendium\\GOTTA BUILD A ZOO  Planet Zoo Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\IMPOSSIBLE GEOMETRY  Beat Saber Rap feat. Chi-chi!.mp3', "C:/Users/maxi2/Music/Stupendium\\IT'S A JOY  2021 REMASTER  We Happy Few Song feat. Dan Bull.mp3", "C:/Users/maxi2/Music/Stupendium\\IT'S A JOY  We Happy Few Song feat. Dan Bull.mp3", 'C:/Users/maxi2/Music/Stupendium\\LIGHTS ON A TRUCK  A Christmas Rap - 2020 Remake.mp3', 'C:/Users/maxi2/Music/Stupendium\\LIGHTS ON A TRUCK - A Christmas Rap.mp3', 'C:/Users/maxi2/Music/Stupendium\\LITTLE ROVER  Song for Opportunity.mp3', 'C:/Users/maxi2/Music/Stupendium\\LOSING MY PATIENTS  Surgeon Simulator 2 Song with Bonecage!.mp3', 'C:/Users/maxi2/Music/Stupendium\\MILK MILK LEMONADE  2 CUPS 100 PUNS  Animated Cuphead Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\MINECRAFT VS LEGO  Rap Battle! Feat. Dan Bull & Epic Rap Battles of History!.mp3', 'C:/Users/maxi2/Music/Stupendium\\NEATH! A Fallen London Musical  Mask of the Rose Song!.mp3', "C:/Users/maxi2/Music/Stupendium\\NO ONE'S HOME  Beholder 3 Rap Feat. McGwire!.mp3", 'C:/Users/maxi2/Music/Stupendium\\NO WAVES LIKE HOME  Subnautica Song feat. SquigglyDigg.mp3', 'C:/Users/maxi2/Music/Stupendium\\NOOK LINE & SINKER  Animal Crossing New Horizons Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\OPEN THE SKY  Stray Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\PICTURES OF SPIDER-MAN  J. Jonah Jameson Rap feat. JT Music, Rustage & Dan Bull.mp3', 'C:/Users/maxi2/Music/Stupendium\\REST EMPLOYED  Death and Taxes Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\RIP AND TEAR (My Way to Your Heart)  Doom Eternal Love Song!.mp3', "C:/Users/maxi2/Music/Stupendium\\ROGUE'S GALLERY  Animal Crossing New Horizons Song!.mp3", 'C:/Users/maxi2/Music/Stupendium\\ROOM FOR IMPROVEMENT  House Flipper Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\SHELTER FROM THE STORM  2022 REMASTER  Frostpunk Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\SHELTER FROM THE STORM  Frostpunk Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\SHINE THROUGH  Life is Strange True Colors Song! Prod. by oo oxygen.mp3', 'C:/Users/maxi2/Music/Stupendium\\SLIDE INTO THE VOID  Control Song feat. Cami-Cat.mp3', 'C:/Users/maxi2/Music/Stupendium\\STUPENDIUM MERCHANDISE RAP - Merch Now Available!.mp3', "C:/Users/maxi2/Music/Stupendium\\THE AFTERMATH  Animated Baldi's Basics Rap!.mp3", 'C:/Users/maxi2/Music/Stupendium\\THE APEX  Hitman 3 Rap feat. NemRaps!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE ARK & THE TINDERBOX  Frostpunk 2 Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE CHAIRMAN ROLLS AGAIN  A Dan Bull Scrabble Diss Rap.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE DATA STREAM  Cyberpunk 2077 Song feat. Cami-Cat!.mp3', 'C:/Users/maxi2/Music/Stupendium\\The DC Villains Cypher  #NerdOut ft The Stupendium, Cami-Cat, Zach B & More.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE END OF THE LINE  The Stupendium & Dan Bull  Choo-Choo Charles Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE FINE PRINT  The Outer Worlds Song.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE FRIGHT BEFORE CHRISTMAS  Horror & Villains Xmas Song! FNAF, Bendy, Among Us and more!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE HOUSE ALWAYS WINS  2023 REMASTER  Fallout New Vegas Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE HOUSE ALWAYS WINS  Animated Fallout New Vegas Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE MOST FASHIONABLE FACTION  Animated Team Fortress 2 Song! [ft. Harry101UK].mp3', 'C:/Users/maxi2/Music/Stupendium\\THE PRODUCTION LINE  Lethal Company Song!  The Stupendium & Dan Bull.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE RIBBON  Alan Wake 2 Song feat. Cami-Cat!.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE SECOND  2021 REMASTER  Hitman 2 Rap.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE SECOND  Hitman 2 Rap.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE TOYBOX  Poppy Playtime Song! Prod. by oo oxygen.mp3', 'C:/Users/maxi2/Music/Stupendium\\THE WEST WAS ONE  Red Dead Redemption 2 Rap feat. SquigglyDigg.mp3', 'C:/Users/maxi2/Music/Stupendium\\THESE HALLOWED WINGS  Animal Crossing New Horizons Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\TUNE INTO THE MADNESS  Little Nightmares 2 Rap feat. Dan Bull!.mp3', 'C:/Users/maxi2/Music/Stupendium\\UNLIKELY CYPHERS THE MUPPETS  THE STUPENDIUM feat. Dan Bull, JT Music, NemRaps, Chi-Chi & More!.mp3', 'C:/Users/maxi2/Music/Stupendium\\VAULT NUMBER 76  2024 REMASTER  Fallout 76 Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\VAULT NUMBER 76  Fallout 76 Song.mp3', 'C:/Users/maxi2/Music/Stupendium\\VENDING MACHINE OF LOVE  The Theme from OnlyCans.mp3', 'C:/Users/maxi2/Music/Stupendium\\WAKE ME UP BEFORE YOU GOAT-GOAT  Goat Simulator Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\WAY DEEPER DOWN  2023 REMASTER  Undertale Skeleton Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\WAY DEEPER DOWN  Undertale Skeleton Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\WE TOLD YOU SO  Back 4 Blood Song Feat. @danbull , @rustage , @Shwabadi & @ConnorQuestMusic.mp3', 'C:/Users/maxi2/Music/Stupendium\\WHAT A FOWL DAY  Untitled Goose Game Song!.mp3', 'C:/Users/maxi2/Music/Stupendium\\WHAT A PLUNDERFUL WORLD  Satisfactory Rap!.mp3', 'C:/Users/maxi2/Music/Stupendium\\WOOL OVER OUR EYES  Cult of the Lamb Song!.mp3'])
    print(loader.load_playlists())